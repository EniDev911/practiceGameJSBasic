<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Board games</title>
  <link rel="stylesheet" href="assets/style.css" />
  <style>

  </style>
</head>

<body>
  <div id="board">
    <div class="game">
      <h2 class="game-title">Trivia</h2>
      <button class="btn-play"><span>Jugar</span></button>
    </div>
    <button class="btn-volume">
      <i class="fa-solid fa-volume-xmark"></i>
    </button>
  </div>
  <script src="https://kit.fontawesome.com/6b8f0c7049.js" crossorigin="anonymous"></script>

  <script>
    const board = document.getElementById("board");
    const btnJugar = document.querySelector(".btn-play");
    const btnAudio = document.querySelector(".btn-volume");
    const audioMain = new Audio("assets/main.wav");

    btnJugar.addEventListener("click", () => {
      // a la antigua con recursividad
      const html = document.querySelector("html");
      audioMain.src = "assets/startup.wav";
      audioMain.loop = false;
      audioMain.play();
      var opacity = 1;
      (function loop() {
        setTimeout(function () {
          opacity = Number(opacity.toFixed(1)) - 0.06;
          html.style.opacity = `${opacity}`
          if (opacity === 0 || opacity < 0) {
            html.style.display = "none"
            window.close()
            window.open("./trivia-js/index.html")
            return
          }
          loop();
        }, 150);
        console.log(opacity);
      })()
    });

    btnAudio.addEventListener("click", async () => {
      const childBtnAudio = btnAudio.firstElementChild;
      if (childBtnAudio.classList.contains("fa-volume-high")) {
        childBtnAudio.classList.replace("fa-volume-high", "fa-volume-xmark");
        audioMain.muted = true
      } else {
        childBtnAudio.classList.replace("fa-volume-xmark", "fa-volume-high");
        audioMain.muted = false
        audioMain.loop = true;
        await audioMain.play();
      }
    })
    document.addEventListener("load", async () => {
      console.log(audioMain);
      audioMain.loop = true;
      await audioMain.play();
    })

  </script>
</body>

</html>